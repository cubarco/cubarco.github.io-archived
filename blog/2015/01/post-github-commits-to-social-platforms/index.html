<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<meta name="theme-color" content="#000000">
<title>在社交平台上发布匹配一定规则的 Github commit message &#8211; /home/cubarco</title>
<meta name="description" content="之前看到了 @fqj1994 juju 的这篇 blog: 用 Google App Script 實現博客更新時自動在社交網絡上發狀態分享, 也感觉自己的 blog 根本没人访问，需要一个类似的东西。因为我的 blog 是用的 jekyll, 挂在 Github 上的，Github 又提供了一个叫 Webhook 的东西，就准备自己实现一种更加优雅的方式。 项目放在 Github 上，遵循 GPLv2 协议。整个流程很简单，就是接受 Webhook 发来的 json, 然后从中提取 commits message, 用一定的正则表达式取出标题，之后再发往各个社交平台。 昨天实现了 twitter 的部分(twitter 可以拿到不会过期的 access token)，看了下 OAuth 感觉要维护那些 token 的状态好麻烦，懒得弄… 我正在用的主要就是 twitter, Google+, 和 Facebook. Google+ 据说没给发 post 的 api, 所以作罢。接下来尽可能支持 Facebook. 如果腳本正常的話，理論上這則文章會很快被發佈到我常用的社交網絡。 嗯，就是这样。 Update 2015-01-15: 这个 blog 发出去之后发现 log 报错了(UnicodeEncodeError)，但是没时间修了(出去玩了)。晚上回来处理完各种事情之后才开始修。发现是 urllib.urlencode() 不支持 unicode, fix 已经推到 Github 上了… 感觉 python 还是学的不好啊。其实我一开始学...">
<meta name="keywords" content="Blog, Python, Github">


<!-- Twitter Cards -->
<meta name="twitter:title" content="在社交平台上发布匹配一定规则的 Github commit message">
<meta name="twitter:description" content="之前看到了 @fqj1994 juju 的这篇 blog: 用 Google App Script 實現博客更新時自動在社交網絡上發狀態分享, 也感觉自己的 blog 根本没人访问，需要一个类似的东西。因为我的 blog 是用的 jekyll, 挂在 Github 上的，Github 又提供了一个叫 Webhook 的东西，就准备自己实现一种更加优雅的方式。 项目放在 Github 上，遵循 GPLv2 协议。整个流程很简单，就是接受 Webhook 发来的 json, 然后从中提取 commits message, 用一定的正则表达式取出标题，之后再发往各个社交平台。 昨天实现了 twitter 的部分(twitter 可以拿到不会过期的 access token)，看了下 OAuth 感觉要维护那些 token 的状态好麻烦，懒得弄… 我正在用的主要就是 twitter, Google+, 和 Facebook. Google+ 据说没给发 post 的 api, 所以作罢。接下来尽可能支持 Facebook. 如果腳本正常的話，理論上這則文章會很快被發佈到我常用的社交網絡。 嗯，就是这样。 Update 2015-01-15: 这个 blog 发出去之后发现 log 报错了(UnicodeEncodeError)，但是没时间修了(出去玩了)。晚上回来处理完各种事情之后才开始修。发现是 urllib.urlencode() 不支持 unicode, fix 已经推到 Github 上了… 感觉 python 还是学的不好啊。其实我一开始学...">
<meta name="twitter:site" content="@Cube_Lin">
<meta name="twitter:creator" content="@Cube_Lin">

<meta name="twitter:card" content="summary">
<!--
   -<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/">
   -->

<!-- Open Graph -->
<meta property="og:locale" content="zh_CN">
<meta property="og:type" content="article">
<meta property="og:title" content="在社交平台上发布匹配一定规则的 Github commit message">
<meta property="og:description" content="之前看到了 @fqj1994 juju 的这篇 blog: 用 Google App Script 實現博客更新時自動在社交網絡上發狀態分享, 也感觉自己的 blog 根本没人访问，需要一个类似的东西。因为我的 blog 是用的 jekyll, 挂在 Github 上的，Github 又提供了一个叫 Webhook 的东西，就准备自己实现一种更加优雅的方式。 项目放在 Github 上，遵循 GPLv2 协议。整个流程很简单，就是接受 Webhook 发来的 json, 然后从中提取 commits message, 用一定的正则表达式取出标题，之后再发往各个社交平台。 昨天实现了 twitter 的部分(twitter 可以拿到不会过期的 access token)，看了下 OAuth 感觉要维护那些 token 的状态好麻烦，懒得弄… 我正在用的主要就是 twitter, Google+, 和 Facebook. Google+ 据说没给发 post 的 api, 所以作罢。接下来尽可能支持 Facebook. 如果腳本正常的話，理論上這則文章會很快被發佈到我常用的社交網絡。 嗯，就是这样。 Update 2015-01-15: 这个 blog 发出去之后发现 log 报错了(UnicodeEncodeError)，但是没时间修了(出去玩了)。晚上回来处理完各种事情之后才开始修。发现是 urllib.urlencode() 不支持 unicode, fix 已经推到 Github 上了… 感觉 python 还是学的不好啊。其实我一开始学...">
<meta property="og:url" content="https://cubl.in/blog/2015/01/post-github-commits-to-social-platforms/">
<meta property="og:site_name" content="/home/cubarco">






<link rel="canonical" href="https://cubl.in/blog/2015/01/post-github-commits-to-social-platforms/">
<link href="https://cubl.in/feed.xml" type="application/atom+xml" rel="alternate" title="/home/cubarco Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cdnjs/cdnjs@95f0cba887c60c1b8c7944d59442a02623193751/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">

<!--Webfonts-->
<link href='//fonts.googleapis.com/css?family=Volkhov|Cabin' rel='stylesheet' type='text/css'>
<!--
   -[> Webfonts <]
   -<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov;cabin.js"></script>
   -->

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<!--<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>-->
<script src="https://cdn.jsdelivr.net/gh/cdnjs/cdnjs@95f0cba887c60c1b8c7944d59442a02623193751/ajax/libs/modernizr/2.7.1/modernizr.min.js"></script>

<!-- Icons -->
<!--
   -[> 16x16 <]
   -<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/favicon-16x16.ico">
   -[> 32x32 <]
   -<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/favicon-32x32.ico">
   -[> 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices <]
   -<link rel="apple-touch-icon-precomposed" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/apple-touch-icon-precomposed.png">
   -[> 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini <]
   -<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/apple-touch-icon-72x72-precomposed.png">
   -[> 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch <]
   -<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/apple-touch-icon-114x114-precomposed.png">
   -[> 144x144 (precomposed) for iPad 3rd and 4th generation <]
   -<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/apple-touch-icon-144x144-precomposed.png">
   -->
<!--
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/favicon.ico">
<link rel="apple-touch-icon" sizes="57x57" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/favicons/favicon-16x16.png" sizes="16x16">
-->

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="https://cubl.in/blog/">Latest</a></li>
		  
		    
		    <li><a href="https://cubl.in/blog/about/">About</a></li>
		  
		    
		    <li><a href="https://cubl.in/blog/category/blog/">Blog</a></li>
		  
		    
		    <li><a href="https://cubl.in/blog/category/notes/">Notes</a></li>
		  
		    
		    <li><a href="https://cubl.in/blog/tags/">Tags</a></li>
		  
        <li class="dosearch"><span><i class="fa fa-search"></i> Search</span></li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
  <div class="search-form">
    <input type="text" class="search-field" placeholder="Search...">
    <button class="close-btn"><i class="fa fa-times-circle fa-2x"></i></button>
    <ul class="search-results post-list"></ul>
<!-- /.search-results -->
  </div>
<!-- /.search-form -->
</div><!-- ./search-wrapper -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="https://cubl.in/blog/tags/#Blog" title="Pages tagged Blog">Blog</a> • <a href="https://cubl.in/blog/tags/#Python" title="Pages tagged Python">Python</a> • <a href="https://cubl.in/blog/tags/#Github" title="Pages tagged Github">Github</a></span>
        
          <h1 class="entry-title">在社交平台上发布匹配一定规则的 Github commit message</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        <span class="author vcard">By <span class="fn">Cubarco</span></span>
        <span class="entry-date date published"><time datetime="2015-01-15T00:00:00+00:00"><i class="fa fa-calendar-o"></i> January 15, 2015</time></span>
        <span class="entry-date date modified"><time datetime="2015-01-15"><i class="fa fa-pencil"></i> January 15, 2015</time></span>
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=Blog,Python,Github&amp;text=%E5%9C%A8%E7%A4%BE%E4%BA%A4%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%8F%91%E5%B8%83%E5%8C%B9%E9%85%8D%E4%B8%80%E5%AE%9A%E8%A7%84%E5%88%99%E7%9A%84%20Github%20commit%20message&amp;url=https://cubl.in/blog/2015/01/post-github-commits-to-social-platforms/&amp;via=Cube_Lin" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=https://cubl.in/blog/2015/01/post-github-commits-to-social-platforms/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<!-- /.social-share -->

        
      </footer>
      <div class="entry-content">
        <p>之前看到了 <a href="https://github.com/fqj1994" class="user-mention">@fqj1994</a> juju 的这篇 blog: <a href="https://blog.fqj.me/posts/2013/08/google-app-script-share-blog-updates-with-social-network">用 Google App Script 實現博客更新時自動在社交網絡上發狀態分享</a>, 也感觉自己的 blog 根本没人访问，需要一个类似的东西。因为我的 blog 是用的 jekyll, 挂在 <a href="https://github.com/cubarco/cubarco.github.io">Github</a> 上的，Github 又提供了一个叫 Webhook 的东西，就准备自己实现一种更加<s>优雅</s>的方式。</p>

<p>项目放在 <a href="https://github.com/cubarco/post-github-commits">Github</a> 上，遵循 <a href="http://www.gnu.org/licenses/gpl-2.0.html">GPLv2</a> 协议。整个流程很简单，就是接受 Webhook 发来的 json, 然后从中提取 commits message, 用一定的正则表达式取出标题，之后再发往各个社交平台。</p>

<p>昨天实现了 twitter 的部分(twitter 可以拿到不会过期的 access token)，看了下 OAuth 感觉要维护那些 token 的状态好麻烦，懒得弄… 我正在用的主要就是 twitter, Google+, 和 Facebook. Google+ 据说没给发 post 的 api, 所以作罢。接下来尽可能支持 Facebook.</p>

<blockquote>
  <p>如果腳本正常的話，理論上這則文章會很快被發佈到我常用的社交網絡。</p>
</blockquote>

<p>嗯，就是这样。</p>

<h6 id="update-2015-01-15">Update 2015-01-15:</h6>
<p>这个 blog 发出去之后发现 log 报错了(UnicodeEncodeError)，但是没时间修了<s>(出去玩了)</s>。晚上回来处理完各种事情之后才开始修。发现是 <code class="highlighter-rouge">urllib.urlencode()</code> 不支持 unicode, fix 已经推到 Github 上了… 感觉 python 还是学的不好啊。其实我一开始学 python 就是随手写个后台，没准备深入。现在又发觉 python 挺好用的，但是不知道怎么深入，有心无力的感觉哎。</p>

        <div align="right">
		    <span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/images/cc_by-nc_88x31.png"></a></span>
        </div>
        <nav class="pagination" role="navigation">
            
              <a href="https://cubl.in/blog/2015/01/vimscript-delpair/" class="btn" title="Vim 删除成对的字符">Previous</a>
            
            
              <a href="https://cubl.in/blog/2015/01/ldconfig-and-steam-workaround/" class="btn" title="解决用 ldconfig 指定 libgl 库时 Steam 的异常">Next</a>
            
        </nav><!-- /.pagination -->
        <div id="disqus_thread"></div>
<!-- /#disqus_thread -->
      </div>
<!-- /.entry-content -->
    </div>
<!-- /.entry-wrapper -->

  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple
        Theme</a>. Published with <a href="https://docs.github.com/en/github/working-with-github-pages/creating-a-github-pages-site">Github
    Pages</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/Cube_Lin" title="Cubarco on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	
	
	
	
	<a href="https://github.com/cubarco" title="Cubarco on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  <a href="https://cubl.in/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div>
<!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script src="https://cdn.jsdelivr.net/gh/cdnjs/cdnjs@95f0cba887c60c1b8c7944d59442a02623193751/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/assets/js/gist-async.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').jekyllSearch({
          jsonFile: 'https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@COMMIT_TAG_NAME/search.json',
          searchResults: '.search-results',
          template: '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          fuzzy: true,
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {

     var bs = {
          close: $(".close-btn"),
          searchform: $(".search-form"),
          canvas: $(".js-menu-screen"),
          dothis: $('.dosearch')
      };

    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      $('body').toggleClass('no-scroll');
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('is-visible');
    });

      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        $('body').toggleClass('no-scroll');
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('is-visible');
    });
  })( jQuery, window );
</script>


<!-- Check whether the page is a post -->

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script id="dsqjs-script" src="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqus.js"></script>
<script>
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'cubarco';
    var disqus_siteName = '/home/cubarco';
    var disqus_api = 'https://disqus.cubl.in/';
    var disqus_apikey = 'Jw86RA4MHn7FOX9T3JdY2rdOwXIHztQXp1QGQzvEjil3rXPCOfIrn4yF53NEOcho';
    var disqus_admin = 'cubarco';
    var disqus_adminLabel = 'Mod';
    var dsqjs = new DisqusJS({
    	    shortname: disqus_shortname,
    	    siteName: disqus_siteName,
    	    api: disqus_api,
    	    apikey: disqus_apikey,
    	    admin: disqus_admin,
    	    adminLabel: disqus_adminLabel
    });
</script>





<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-54867602-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>
</html>
